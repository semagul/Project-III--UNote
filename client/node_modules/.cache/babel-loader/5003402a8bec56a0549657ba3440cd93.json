{"ast":null,"code":"import _slicedToArray from\"/Users/sema/tagtag/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{AuthContext}from'../context/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var _useContext=useContext(AuthContext),storeToken=_useContext.storeToken,verifyStoredToken=_useContext.verifyStoredToken;var nagivate=useNavigate();var handleSubmit=function handleSubmit(e){e.preventDefault();var requestBody={email:email,password:password};axios.post('api/auth/login',requestBody).then(function(response){var token=response.data.authToken;storeToken(token);verifyStoredToken().then(function(){nagivate('/allitems');});}).catch(function(err){console.log(err);var errorDescription=err.response.data.message;setErrorMessage(errorDescription);});};var handleEmail=function handleEmail(e){return setEmail(e.target.value);};var handlePassword=function handlePassword(e){return setPassword(e.target.value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:email,onChange:handleEmail}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:handlePassword}),/*#__PURE__*/_jsx(\"button\",{action:\"submit\",children:\"Login\"})]}),errorMessage&&/*#__PURE__*/_jsx(\"h5\",{children:errorMessage}),/*#__PURE__*/_jsx(\"h3\",{children:\"Don't have an account?\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Click here to create an account\"})]});}","map":{"version":3,"names":["React","useState","useContext","Link","useNavigate","axios","AuthContext","Login","email","setEmail","password","setPassword","undefined","errorMessage","setErrorMessage","storeToken","verifyStoredToken","nagivate","handleSubmit","e","preventDefault","requestBody","post","then","response","token","data","authToken","catch","err","console","log","errorDescription","message","handleEmail","target","value","handlePassword"],"sources":["/Users/sema/tagtag/client/src/pages/Login.js"],"sourcesContent":["import React, { useState, useContext } from 'react'\nimport { Link, useNavigate } from 'react-router-dom'\nimport axios from 'axios'\nimport { AuthContext } from '../context/auth'\n\n\nexport default function Login() {\n\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [errorMessage, setErrorMessage] = useState(undefined)\n\n    const { storeToken, verifyStoredToken } = useContext(AuthContext)\n\n    const nagivate = useNavigate()\n\n    const handleSubmit = e => {\n        e.preventDefault()\n        const requestBody = { email, password }\n        axios.post('api/auth/login', requestBody)\n            .then(response => {\n                const token = response.data.authToken\n                storeToken(token)\n                verifyStoredToken()\n                    .then(() => {\n                        nagivate('/allitems')\n                    })\n\n            })\n            .catch(err => {\n                console.log(err)\n                const errorDescription = err.response.data.message\n                setErrorMessage(errorDescription)\n\n            })\n    }\n\n    const handleEmail = e => setEmail(e.target.value)\n    const handlePassword = e => setPassword(e.target.value)\n\n\n    return (\n        <>\n            <h1>Login</h1>\n            <form onSubmit={handleSubmit}>\n\n                <label htmlFor='email'>Email: </label>\n                <input type='text' value={email} onChange={handleEmail} />\n\n                <label htmlFor='password'>Password: </label>\n                <input type='password' value={password} onChange={handlePassword} />\n\n                <button action=\"submit\">Login</button>\n            </form>\n\n            {errorMessage && <h5>{errorMessage}</h5>}\n\n            <h3>Don't have an account?</h3>\n            <Link to=\"/signup\">Click here to create an account</Link>\n\n        </>\n\n    )\n}"],"mappings":"+GAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,iBAA5B,C,6IAGA,cAAe,SAASC,MAAT,EAAiB,CAE5B,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAAgCR,QAAQ,CAAC,EAAD,CAAxC,yCAAOS,QAAP,eAAiBC,WAAjB,eACA,eAAwCV,QAAQ,CAACW,SAAD,CAAhD,yCAAOC,YAAP,eAAqBC,eAArB,eAEA,gBAA0CZ,UAAU,CAACI,WAAD,CAApD,CAAQS,UAAR,aAAQA,UAAR,CAAoBC,iBAApB,aAAoBA,iBAApB,CAEA,GAAMC,SAAQ,CAAGb,WAAW,EAA5B,CAEA,GAAMc,aAAY,CAAG,QAAfA,aAAe,CAAAC,CAAC,CAAI,CACtBA,CAAC,CAACC,cAAF,GACA,GAAMC,YAAW,CAAG,CAAEb,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAApB,CACAL,KAAK,CAACiB,IAAN,CAAW,gBAAX,CAA6BD,WAA7B,EACKE,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAMC,MAAK,CAAGD,QAAQ,CAACE,IAAT,CAAcC,SAA5B,CACAZ,UAAU,CAACU,KAAD,CAAV,CACAT,iBAAiB,GACZO,IADL,CACU,UAAM,CACRN,QAAQ,CAAC,WAAD,CAAR,CACH,CAHL,EAKH,CATL,EAUKW,KAVL,CAUW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,GAAMG,iBAAgB,CAAGH,GAAG,CAACL,QAAJ,CAAaE,IAAb,CAAkBO,OAA3C,CACAnB,eAAe,CAACkB,gBAAD,CAAf,CAEH,CAfL,EAgBH,CAnBD,CAqBA,GAAME,YAAW,CAAG,QAAdA,YAAc,CAAAf,CAAC,QAAIV,SAAQ,CAACU,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAZ,EAArB,CACA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,CAAAlB,CAAC,QAAIR,YAAW,CAACQ,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAf,EAAxB,CAGA,mBACI,wCACI,6BADJ,cAEI,cAAM,QAAQ,CAAElB,YAAhB,wBAEI,cAAO,OAAO,CAAC,OAAf,qBAFJ,cAGI,cAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAEV,KAA1B,CAAiC,QAAQ,CAAE0B,WAA3C,EAHJ,cAKI,cAAO,OAAO,CAAC,UAAf,wBALJ,cAMI,cAAO,IAAI,CAAC,UAAZ,CAAuB,KAAK,CAAExB,QAA9B,CAAwC,QAAQ,CAAE2B,cAAlD,EANJ,cAQI,eAAQ,MAAM,CAAC,QAAf,mBARJ,GAFJ,CAaKxB,YAAY,eAAI,oBAAKA,YAAL,EAbrB,cAeI,8CAfJ,cAgBI,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,6CAhBJ,GADJ,CAsBH"},"metadata":{},"sourceType":"module"}