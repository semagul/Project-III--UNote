{"ast":null,"code":"import _slicedToArray from\"/Users/sema/tagtag/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React,{useState,useEffect}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import streamAudioWithAuth from'../components/helpers/audioStreamWithAuth';import blobUrlFromId from'../components/helpers/blobUrlFromId';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AudioDetails(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),audio=_useState2[0],setAudio=_useState2[1];var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();useEffect(function(){var storedToken=localStorage.getItem('authToken');axios.get(\"/api/audios/\".concat(id),{headers:{Authorization:\"Bearer \".concat(storedToken)}}).then(function(response){console.log(response);setAudio(response.data);}).catch(function(err){return console.log(err);});},[]);var deleteAudio=function deleteAudio(){var storedToken=localStorage.getItem('authToken');axios.delete(\"/api/audios/\".concat(id),{headers:{Authorization:\"Bearer \".concat(storedToken)}}).then(function(){navigate('/audios');}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsx(_Fragment,{children:audio===null?/*#__PURE__*/_jsx(\"h3\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Audio Details\"}),/*#__PURE__*/_jsx(\"h3\",{children:audio.title}),/*#__PURE__*/_jsx(\"p\",{children:audio.tags.join(\", \")}),/*#__PURE__*/_jsx(Link,{to:\"/audios/edit/\".concat(audio._id),children:/*#__PURE__*/_jsx(\"button\",{children:\"Edit this audio \\uD83D\\uDCDD\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return streamAudioWithAuth(blobUrlFromId(audio._id),localStorage.getItem('authToken'));},children:\"Play\"}),/*#__PURE__*/_jsx(\"button\",{onClick:deleteAudio,children:\"Delete this audio \\u274C\"})]})});}","map":{"version":3,"names":["axios","React","useState","useEffect","useParams","Link","useNavigate","streamAudioWithAuth","blobUrlFromId","AudioDetails","audio","setAudio","id","navigate","storedToken","localStorage","getItem","get","headers","Authorization","then","response","console","log","data","catch","err","deleteAudio","delete","title","tags","join","_id"],"sources":["/Users/sema/tagtag/client/src/pages/AudioDetails.js"],"sourcesContent":["import axios from 'axios'\nimport React, { useState, useEffect } from 'react'\nimport { useParams, Link, useNavigate } from 'react-router-dom'\nimport streamAudioWithAuth from '../components/helpers/audioStreamWithAuth'\nimport blobUrlFromId from '../components/helpers/blobUrlFromId'\n\nexport default function AudioDetails() {\n\tconst [audio, setAudio] = useState(null)\n\n\tconst { id } = useParams()\n\tconst navigate = useNavigate()\n\n\tuseEffect(() => {\n\t\tconst storedToken = localStorage.getItem('authToken')\n\t\taxios.get(`/api/audios/${id}`, { headers: { Authorization: `Bearer ${storedToken}` } })\n\t\t\t.then(response => {\n\t\t\t\tconsole.log(response)\n\t\t\t\tsetAudio(response.data)\n\t\t\t})\n\t\t\t.catch(err => console.log(err))\n\t}, [])\n\n\tconst deleteAudio = () => {\n\t\tconst storedToken = localStorage.getItem('authToken')\n\t\taxios.delete(`/api/audios/${id}`, { headers: { Authorization: `Bearer ${storedToken}` } })\n\t\t\t.then(() => {\n\t\t\t\tnavigate('/audios')\n\t\t\t})\n\t\t\t.catch(err => console.log(err))\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{audio === null ? <h3>Loading...</h3> :\n\t\t\t\t<>\n\t\t\t\t\t<h1>Audio Details</h1>\n\t\t\t\t\t<h3>{audio.title}</h3>\n\t\t\t\t\t<p>{audio.tags.join(\", \")}</p>\n\t\t\t\t\t<Link to={`/audios/edit/${audio._id}`}>\n\t\t\t\t\t\t<button>Edit this audio üìù</button>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<button onClick={() => streamAudioWithAuth(blobUrlFromId(audio._id), localStorage.getItem('authToken'))}>Play</button>\n\t\t\t\t\t<button onClick={deleteAudio}>Delete this audio ‚ùå</button>\n\t\t\t\t</>\n\t\t\t}\n\t\t</>\n\t)\n}"],"mappings":"+GAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,CAAoBC,IAApB,CAA0BC,WAA1B,KAA6C,kBAA7C,CACA,MAAOC,oBAAP,KAAgC,2CAAhC,CACA,MAAOC,cAAP,KAA0B,qCAA1B,C,6IAEA,cAAe,SAASC,aAAT,EAAwB,CACtC,cAA0BP,QAAQ,CAAC,IAAD,CAAlC,wCAAOQ,KAAP,eAAcC,QAAd,eAEA,eAAeP,SAAS,EAAxB,CAAQQ,EAAR,YAAQA,EAAR,CACA,GAAMC,SAAQ,CAAGP,WAAW,EAA5B,CAEAH,SAAS,CAAC,UAAM,CACf,GAAMW,YAAW,CAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAApB,CACAhB,KAAK,CAACiB,GAAN,uBAAyBL,EAAzB,EAA+B,CAAEM,OAAO,CAAE,CAAEC,aAAa,kBAAYL,WAAZ,CAAf,CAAX,CAA/B,EACEM,IADF,CACO,SAAAC,QAAQ,CAAI,CACjBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACAV,QAAQ,CAACU,QAAQ,CAACG,IAAV,CAAR,CACA,CAJF,EAKEC,KALF,CAKQ,SAAAC,GAAG,QAAIJ,QAAO,CAACC,GAAR,CAAYG,GAAZ,CAAJ,EALX,EAMA,CARQ,CAQN,EARM,CAAT,CAUA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAM,CACzB,GAAMb,YAAW,CAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAApB,CACAhB,KAAK,CAAC4B,MAAN,uBAA4BhB,EAA5B,EAAkC,CAAEM,OAAO,CAAE,CAAEC,aAAa,kBAAYL,WAAZ,CAAf,CAAX,CAAlC,EACEM,IADF,CACO,UAAM,CACXP,QAAQ,CAAC,SAAD,CAAR,CACA,CAHF,EAIEY,KAJF,CAIQ,SAAAC,GAAG,QAAIJ,QAAO,CAACC,GAAR,CAAYG,GAAZ,CAAJ,EAJX,EAKA,CAPD,CASA,mBACC,yBACEhB,KAAK,GAAK,IAAV,cAAiB,kCAAjB,cACA,wCACC,qCADD,cAEC,oBAAKA,KAAK,CAACmB,KAAX,EAFD,cAGC,mBAAInB,KAAK,CAACoB,IAAN,CAAWC,IAAX,CAAgB,IAAhB,CAAJ,EAHD,cAIC,KAAC,IAAD,EAAM,EAAE,wBAAkBrB,KAAK,CAACsB,GAAxB,CAAR,uBACC,wDADD,EAJD,cAOC,eAAQ,OAAO,CAAE,yBAAMzB,oBAAmB,CAACC,aAAa,CAACE,KAAK,CAACsB,GAAP,CAAd,CAA2BjB,YAAY,CAACC,OAAb,CAAqB,WAArB,CAA3B,CAAzB,EAAjB,kBAPD,cAQC,eAAQ,OAAO,CAAEW,WAAjB,sCARD,GAFF,EADD,CAgBA"},"metadata":{},"sourceType":"module"}