{"ast":null,"code":"import _toConsumableArray from\"/Users/sema/tagtag/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/sema/tagtag/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{Link}from'react-router-dom';import SearchBar from'../components/SearchBar';import streamAudioWithAuth from'../components/helpers/audioStreamWithAuth';import blobUrlFromId from'../components/helpers/blobUrlFromId';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EveryItem(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),events=_useState2[0],setEvents=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),notes=_useState4[0],setNotes=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),audios=_useState6[0],setAudios=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),searchTag=_useState8[0],setSearchTag=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),searchTitle=_useState10[0],setSearchTitle=_useState10[1];var storedToken=localStorage.getItem('authToken');var getAllItems=function getAllItems(){axios.get(\"/api/allitems\",{headers:{Authorization:\"Bearer \".concat(storedToken)}}).then(function(response){setEvents(response.data.createdEvents);setNotes(response.data.createdNotes);setAudios(response.data.createdAudios);}).catch(function(err){return console.log(err);});};useEffect(function(){getAllItems();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All your items\"}),\"Tag:\",/*#__PURE__*/_jsx(SearchBar,{searchProp:setSearchTag}),\"Title:\",/*#__PURE__*/_jsx(SearchBar,{searchProp:setSearchTitle}),[].concat(_toConsumableArray(events),_toConsumableArray(notes),_toConsumableArray(audios)).filter(function(item){return item.tags.toString().toLowerCase().includes(searchTag.toLowerCase())&&item.title.toString().toLowerCase().includes(searchTitle.toLowerCase());}).map(function(item){return/*#__PURE__*/_jsxs(\"div\",{children:[events.includes(item)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/events/\".concat(item._id),children:/*#__PURE__*/_jsx(\"h2\",{children:item.title})}),/*#__PURE__*/_jsx(\"p\",{children:new Date(item.startDate).toDateString()}),/*#__PURE__*/_jsx(\"p\",{children:new Date(item.startDate).toTimeString().substring(0,5)}),/*#__PURE__*/_jsx(\"p\",{children:item.place})]}),notes.includes(item)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/notes/\".concat(item._id),children:/*#__PURE__*/_jsx(\"h2\",{children:item.title})}),/*#__PURE__*/_jsx(\"p\",{children:item.description}),/*#__PURE__*/_jsx(\"p\",{children:new Date(item.createdAt).toDateString()})]}),audios.includes(item)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/audios/\".concat(item._id),children:/*#__PURE__*/_jsx(\"h2\",{children:item.title})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return streamAudioWithAuth(blobUrlFromId(item._id),storedToken);},children:\"Play\"}),/*#__PURE__*/_jsx(\"p\",{children:new Date(item.createdAt).toDateString()})]}),item.tags.join(\", \")]},item._id);})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","Link","SearchBar","streamAudioWithAuth","blobUrlFromId","EveryItem","events","setEvents","notes","setNotes","audios","setAudios","searchTag","setSearchTag","searchTitle","setSearchTitle","storedToken","localStorage","getItem","getAllItems","get","headers","Authorization","then","response","data","createdEvents","createdNotes","createdAudios","catch","err","console","log","filter","item","tags","toString","toLowerCase","includes","title","map","_id","Date","startDate","toDateString","toTimeString","substring","place","description","createdAt","join"],"sources":["/Users/sema/tagtag/client/src/pages/EveryItem.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport axios from \"axios\"\nimport { Link } from 'react-router-dom'\nimport SearchBar from '../components/SearchBar'\nimport streamAudioWithAuth from '../components/helpers/audioStreamWithAuth'\nimport blobUrlFromId from '../components/helpers/blobUrlFromId'\n\nexport default function EveryItem() {\n    const [events, setEvents] = useState([])\n    const [notes, setNotes] = useState([])\n    const [audios, setAudios] = useState([])\n    const [searchTag, setSearchTag] = useState(\"\")\n    const [searchTitle, setSearchTitle] = useState(\"\")\n\n    const storedToken = localStorage.getItem('authToken')\n    const getAllItems = () => {\n        axios.get(\"/api/allitems\", { headers: { Authorization: `Bearer ${storedToken}` } })\n            .then(response => {\n                setEvents(response.data.createdEvents)\n                setNotes(response.data.createdNotes)\n                setAudios(response.data.createdAudios)\n            })\n            .catch(err => console.log(err))\n    }\n\n    useEffect(() => {\n        getAllItems()\n    }, [])\n\n\n    return (\n        <>\n            <h1>All your items</h1>\n            Tag:\n            <SearchBar searchProp={setSearchTag} />\n            Title:\n            <SearchBar searchProp={setSearchTitle} />\n            {[...events, ...notes, ...audios]\n                .filter((item) =>\n                    item.tags.toString().toLowerCase().includes(searchTag.toLowerCase())\n                    && item.title.toString().toLowerCase().includes(searchTitle.toLowerCase()))\n\n                .map((item) => {\n                    return (\n                        <div key={item._id}>\n                            {events.includes(item) &&\n                                <>\n                                    <Link to={`/events/${item._id}`}>\n                                        <h2>{(item.title)}</h2>\n                                    </Link>\n                                    <p>{new Date(item.startDate).toDateString()}</p>\n                                    <p>{new Date(item.startDate).toTimeString().substring(0, 5)}</p>\n                                    <p>{(item.place)}</p>\n                                </>\n                            }\n\n                            {notes.includes(item) &&\n                                <>\n                                    <Link to={`/notes/${item._id}`}>\n                                        <h2>{(item.title)}</h2>\n                                    </Link>\n                                    <p>{(item.description)}</p>\n                                    <p>{new Date(item.createdAt).toDateString()}</p>\n                                </>\n                            }\n\n                            {audios.includes(item) &&\n                                <>\n                                    <Link to={`/audios/${item._id}`}>\n                                        <h2>{(item.title)}</h2>\n                                    </Link>\n                                    <button onClick={() => streamAudioWithAuth(blobUrlFromId(item._id), storedToken)}>\n                                        Play\n                                    </button>\n                                    <p>{new Date(item.createdAt).toDateString()}</p>\n                                </>\n                            }\n\n                            {item.tags.join(\", \")}\n                        </div>\n                    )\n                })\n\n            }\n        </>\n    )\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}